(()=>{var e=$("input[name=_token]").val(),t="",o=1;Dropzone.autoDiscover=!1;var l=$("#system_service_fee_id").val(),a=(100-l)/100,s=l/100;function i(e){iziToast.error({message:e,position:"topRight"})}function n(e){for(var t in $("#submit_proposal_btn_id").attr("disabled",!1),$("input,select,textarea").removeClass("error-field"),e){var o=e[t];$('[name="'+t+'"]').addClass("error-field"),$('[id="'+t+'"]').addClass("error-field"),$("#"+t).next().addClass("error-field"),i(o)}}function r(e){return Number.parseFloat(e).toFixed(2)}$((function(){var l="",c=$("#propsal_form").attr("action");new Dropzone("#demo-upload",{url:c,autoProcessQueue:!1,parallelUploads:4,dictDefaultMessage:"your custom message",thumbnailHeight:60,thumbnailWidth:60,maxFiles:4,uploadMultiple:!0,maxFilesize:3,acceptedFiles:".jpg,.png,.jpeg,.docx,.pdf",filesizeBase:1e3,addRemoveLinks:!0,init:function(){this.on("sendingmultiple",(function(t,o,a){a.append("_token",e),a.append("data",l)})),this.on("complete",(function(e,t,o){})),this.on("successmultiple",(function(e,t){t.error&&n(t.error),t.redirect&&window.location.replace(t.redirect)})),t=this,$("#propsal_form").submit((function(o){$("#submit_proposal_btn_id").attr("disabled",!0),l=$(this).serialize(),o.preventDefault(),o.stopPropagation();$.ajax({type:"POST",url:"/seller/validate-proposal",data:{data:l,_token:e},success:function(o){o.validated?t.getQueuedFiles().length>0?t.processQueue():function(t){var o=$("#propsal_form").attr("action");$.ajax({type:"POST",url:o,data:{data:t,_token:e},success:function(e){console.log(e),e.error?n(e.error):window.location.replace(e.redirect)}})}(l):(o.redirect&&window.location.replace(o.redirect),n(o.error))}})}))},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var o=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),l=0;l<o.length;l++){var a=o[l];a.alt=e.name,a.src=t}setTimeout((function(){e.previewElement.classList.add("dz-image-preview")}),1)}}});$("#defaultSearch").on("change",(function(){this.form.submit()})),$("#milestone_btn").click((function(){o+=1,$("#milestiones").append('<div class="row" id="milestone'+o+'"><div class="col-md-4 col-lg-4 col-xl-4 col-sm-12 col-xs-12"><label>Description*</label><input type="text" name="milestones['+o+'][description]" maxlength="255" value="" class="form-control"  id="milestones.'+o+'.description"></div><div class="col-md-2 col-lg-2 col-xl-2 col-sm-4 col-xs-4"><label>Start Date*</label><div class="input-group mb-3"><input type="date" class="form-control" name="milestones['+o+'][start_date]" value="" id="milestones.'+o+'.start_date" ></div></div><div class="col-md-2 col-lg-2 col-xl-2 col-sm-4 col-xs-4"><label>Due Date*</label><div class="input-group mb-3"><input type="date" class="form-control" name="milestones['+o+'][end_date]" value=""  id="milestones.'+o+'.end_date" ></div></div><div class="col-md-2 col-lg-2 col-xl-2 col-sm-4 col-xs-4"><label>Amount*</label><div class="input-group"><input type="number" class="form-control milestones_amount" name="milestones['+o+'][amount]" maxlength="255" value=""  id="milestones.'+o+'.amount" oninput="this.value = Math.abs(this.value)"> <span class="input-group-text float-end">$</span></div></div><div class="col-md-2 col-lg-2 col-xl-2 col-sm-4 col-xs-4 pt-custom" ><Button class="btn btn-danger " id="delete_btn'+o+'" onclick="removerow('+o+')"><i class="fa fa-trash"></i></button> </div></div>')})),$("#hourly_bid_rate").focusout((function(){var e=$(this).val();e<0?(i("Rate Per hour should be greater than $0 "),$(this).val("")):($("#amount_receive").val(r(e*a)),$("#system_fee").html("$"+r(e*s)))})),$("#total_milestones_amount").focusout((function(){var e=$(this).val();e<0?(i("Project Cost should be greater than $0 "),$(this).val("")):e>9999?(i("Project Cost should not be greater than $9999 "),$(this).val("")):($("#milestones_amount_receive").val(r(e*a)),$("#system_fee").html("$"+r(e*s)))})),$(document).on("focusout",".milestones_amount",(function(){var e;e=0,$(".milestones_amount").each((function(){var t=$(this).val();e+=parseFloat(t)})),$("#total_milestones_amount").val(e),$("#milestones_amount_receive").val(r(e*a)),$("#system_fee").html("$"+r(e*s))}))}))})();